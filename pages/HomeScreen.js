import { StyleSheet, Text, TouchableOpacity, View } from 'react-native';
import { SvgXml } from 'react-native-svg';
import { useFonts } from 'expo-font';
import AppLoading from 'expo-app-loading'
import * as Notifications from 'expo-notifications';
import { useRef } from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';

const Home = createNativeStackNavigator();

const HomeScreen = ({navigation}) => {
    const responseListener = useRef();
    const notificationListener = useRef();

    responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {
        console.log(response);
        navigation.navigate('Notif')
      });
    
    notificationListener.current = Notifications.addNotificationReceivedListener(notification => {
        navigation.navigate('Notif')
    });
    
    return (
            <Home.Navigator
            screenOptions={({ route }) => ({
                headerShown: false,
            })}
            >
                <Home.Screen name='home' component={ScreenA}/>
                <Home.Screen name='connect' component={ScreenB}/>
            </Home.Navigator>
    )
}

const ScreenA = ({ navigation }) => {
    return(
        <View style={{flex:1, alignItems: 'center', backgroundColor: '#D8ECFF'}}>
            <View style={styles.baby}>
                <SvgXml xml={babyImage} width="180" height="180" />
            </View>
            <Text style={styles.text}>
                Welcome!
            </Text>
            <TouchableOpacity style={styles.connect} onClick={navigation.navigate('connect')}>
                <Text style={styles.connectText}>
                    Connect
                </Text>
            </TouchableOpacity>
        </View>
    )
}

const ScreenB = ({navigation}) => {
    return (
        <View style={{ flex: 1, alignItems: 'center', backgroundColor: '#D8ECFF' }}>
            <View style={styles.icon}>
                <SvgXml xml={image} width="220" height="190" />
            </View>
            <Text style={styles.header}>
                Connecting to...
            </Text>
            <TouchableOpacity style={styles.connect}>
                <Text style={styles.connectText}>
                    Sensor 1
                </Text>
            </TouchableOpacity>
            <TouchableOpacity style={styles.done} onClick={navigation.navigate('home')}>
                <Text style={styles.doneText}>
                    Done
                </Text>
            </TouchableOpacity>
        </View>
    )
}

const babyImage = `<svg width="185" height="185" viewBox="0 0 185 185" fill="none" xmlns="http://www.w3.org/2000/svg">
<path opacity="0.2" d="M161.875 92.4999C161.875 106.221 157.806 119.634 150.183 131.043C142.56 142.451 131.725 151.343 119.049 156.594C106.372 161.845 92.423 163.219 78.9656 160.542C65.5082 157.865 53.1467 151.258 43.4444 141.555C33.7422 131.853 27.1348 119.492 24.458 106.034C21.7811 92.5768 23.155 78.6278 28.4058 65.9512C33.6567 53.2746 42.5486 42.4397 53.9573 34.8167C65.3659 27.1937 78.7789 23.1249 92.5 23.1249C110.899 23.1249 128.545 30.434 141.556 43.4443C154.566 56.4547 161.875 74.1005 161.875 92.4999Z" fill="#1D294F"/>
<path d="M66.4844 101.172C64.7693 101.172 63.0926 100.663 61.6666 99.7105C60.2405 98.7576 59.129 97.4033 58.4726 95.8187C57.8163 94.2341 57.6445 92.4905 57.9791 90.8083C58.3138 89.1261 59.1397 87.5809 60.3525 86.3682C61.5652 85.1554 63.1104 84.3295 64.7926 83.9949C66.4748 83.6602 68.2184 83.832 69.803 84.4883C71.3876 85.1447 72.7419 86.2562 73.6948 87.6823C74.6477 89.1084 75.1563 90.785 75.1563 92.5001C75.1563 94.8 74.2426 97.0057 72.6163 98.632C70.99 100.258 68.7843 101.172 66.4844 101.172ZM118.516 83.8282C116.8 83.8282 115.124 84.3368 113.698 85.2897C112.272 86.2426 111.16 87.5969 110.504 89.1815C109.848 90.7661 109.676 92.5097 110.01 94.1919C110.345 95.8741 111.171 97.4193 112.384 98.632C113.596 99.8448 115.142 100.671 116.824 101.005C118.506 101.34 120.25 101.168 121.834 100.512C123.419 99.8555 124.773 98.744 125.726 97.3179C126.679 95.8919 127.188 94.2152 127.188 92.5001C127.188 90.2002 126.274 87.9945 124.648 86.3682C123.021 84.7419 120.816 83.8282 118.516 83.8282ZM109.649 116.514C104.5 119.71 98.5601 121.403 92.5 121.403C86.4399 121.403 80.5004 119.71 75.3514 116.514C74.0538 115.696 72.4843 115.426 70.9882 115.765C69.492 116.104 68.1917 117.023 67.3733 118.321C66.5549 119.618 66.2854 121.188 66.6243 122.684C66.9631 124.18 67.8824 125.48 69.1799 126.299C76.1763 130.66 84.2555 132.972 92.5 132.972C100.744 132.972 108.824 130.66 115.82 126.299C117.118 125.48 118.037 124.18 118.376 122.684C118.715 121.188 118.445 119.618 117.627 118.321C116.808 117.023 115.508 116.104 114.012 115.765C112.516 115.426 110.946 115.696 109.649 116.514ZM167.656 92.5001C167.656 107.365 163.248 121.895 154.99 134.255C146.732 146.614 134.994 156.247 121.261 161.935C107.528 167.624 92.4166 169.112 77.8378 166.212C63.2589 163.312 49.8673 156.154 39.3565 145.644C28.8457 135.133 21.6878 121.741 18.7879 107.162C15.888 92.5835 17.3763 77.4721 23.0647 63.7391C28.7531 50.0061 38.3861 38.2683 50.7454 30.01C63.1048 21.7517 77.6355 17.3439 92.5 17.3439C112.426 17.3649 131.53 25.2899 145.62 39.3799C159.71 53.4698 167.635 72.5739 167.656 92.5001ZM156.094 92.5001C156.074 76.1294 149.749 60.3954 138.433 48.5654C127.117 36.7353 111.679 29.7183 95.3256 28.9714C86.95 40.7435 86.7188 51.9446 86.7188 52.0314C86.7188 53.5646 87.3279 55.0351 88.4121 56.1193C89.4962 57.2035 90.9667 57.8126 92.5 57.8126C94.0333 57.8126 95.5038 57.2035 96.588 56.1193C97.6722 55.0351 98.2813 53.5646 98.2813 52.0314C98.2813 50.4981 98.8904 49.0276 99.9745 47.9434C101.059 46.8592 102.529 46.2501 104.063 46.2501C105.596 46.2501 107.066 46.8592 108.15 47.9434C109.235 49.0276 109.844 50.4981 109.844 52.0314C109.844 56.6312 108.016 61.0427 104.764 64.2952C101.511 67.5478 97.0999 69.3751 92.5 69.3751C87.9002 69.3751 83.4887 67.5478 80.2361 64.2952C76.9835 61.0427 75.1563 56.6312 75.1563 52.0314C75.1563 51.5038 75.2502 41.6974 81.2699 29.8964C69.3631 32.0326 58.3126 37.5205 49.4151 45.7162C40.5176 53.9119 34.1422 64.4753 31.037 76.1669C27.9319 87.8585 28.2258 100.193 31.8844 111.724C35.5429 123.254 42.4142 133.502 51.692 141.264C60.9698 149.027 72.2692 153.982 84.2642 155.549C96.2593 157.116 108.452 155.228 119.413 150.109C130.373 144.99 139.646 136.851 146.143 126.646C152.64 116.442 156.092 104.597 156.094 92.5001Z" fill="#1D294F"/>
</svg>`

const image = `<svg width="645" height="329" viewBox="0 0 645 329" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M73.807 30.5578C76.3135 33.0572 77.7214 36.4452 77.7214 39.9777C77.7214 43.5101 76.3135 46.8981 73.807 49.3975C58.8897 64.2515 47.0564 81.8866 38.9831 101.296C30.9097 120.705 26.7544 141.507 26.7544 162.516C26.7544 183.524 30.9097 204.327 38.9831 223.736C47.0564 243.145 58.8897 260.78 73.807 275.634C76.1713 278.161 77.4584 281.503 77.3972 284.957C77.336 288.41 75.9313 291.705 73.479 294.147C71.0268 296.59 67.7183 297.989 64.2508 298.049C60.7833 298.11 57.4274 296.828 54.8902 294.474C-18.2967 221.603 -18.2967 103.446 54.8902 30.5578C57.3998 28.0615 60.8017 26.6594 64.3486 26.6594C67.8955 26.6594 71.2974 28.0615 73.807 30.5578ZM111.659 68.255C112.902 69.4929 113.889 70.9628 114.562 72.5806C115.235 74.1984 115.582 75.9325 115.582 77.6838C115.582 79.435 115.235 81.1691 114.562 82.7869C113.889 84.4047 112.902 85.8746 111.659 87.1125C91.5794 107.111 80.2991 134.234 80.2991 162.516C80.2991 190.797 91.5794 217.921 111.659 237.919C114.098 240.432 115.449 243.799 115.42 247.294C115.391 250.789 113.985 254.133 111.504 256.606C109.024 259.078 105.668 260.482 102.158 260.514C98.6489 260.546 95.2672 259.204 92.7417 256.777C80.3119 244.398 70.452 229.703 63.725 213.53C56.998 197.356 53.5357 180.022 53.5357 162.516C53.5357 145.01 56.998 127.675 63.725 111.502C70.452 95.3285 80.3119 80.6332 92.7417 68.255C95.2514 65.7587 98.6532 64.3566 102.2 64.3566C105.747 64.3566 109.149 65.7587 111.659 68.255ZM149.528 105.97C152.035 108.469 153.442 111.857 153.442 115.39C153.442 118.922 152.035 122.31 149.528 124.81C144.556 129.761 140.611 135.639 137.92 142.109C135.229 148.579 133.844 155.513 133.844 162.516C133.844 169.519 135.229 176.453 137.92 182.923C140.611 189.392 144.556 195.271 149.528 200.222C150.806 201.452 151.825 202.924 152.525 204.55C153.226 206.177 153.595 207.926 153.609 209.696C153.624 211.466 153.284 213.221 152.61 214.859C151.937 216.497 150.942 217.985 149.685 219.236C148.428 220.487 146.933 221.476 145.287 222.145C143.642 222.815 141.88 223.151 140.102 223.135C138.325 223.119 136.569 222.75 134.936 222.051C133.304 221.352 131.827 220.335 130.593 219.062C115.538 204.063 107.08 183.724 107.08 162.516C107.08 141.308 115.538 120.968 130.593 105.97C133.103 103.474 136.505 102.072 140.052 102.072C143.599 102.072 147.018 103.474 149.528 105.97Z" fill="#255792"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M570.385 30.5578C572.895 28.0615 576.297 26.6594 579.844 26.6594C583.391 26.6594 586.792 28.0615 589.302 30.5578C662.489 103.428 662.489 221.603 589.302 294.492C588.067 295.764 586.589 296.779 584.956 297.477C583.323 298.175 581.566 298.542 579.789 298.556C578.012 298.571 576.25 298.233 574.605 297.562C572.96 296.891 571.466 295.9 570.21 294.648C568.954 293.396 567.961 291.907 567.289 290.268C566.617 288.63 566.279 286.874 566.295 285.105C566.311 283.335 566.681 281.586 567.384 279.96C568.086 278.334 569.106 276.863 570.385 275.634C585.3 260.78 597.131 243.147 605.203 223.739C613.274 204.332 617.429 183.531 617.429 162.525C617.429 141.518 613.274 120.718 605.203 101.31C597.131 81.9029 585.3 64.269 570.385 49.4153C567.879 46.9159 566.471 43.5279 566.471 39.9954C566.471 36.463 567.879 33.075 570.385 30.5756V30.5578ZM532.534 68.255C535.043 65.7587 538.445 64.3566 541.992 64.3566C545.539 64.3566 548.941 65.7587 551.45 68.255C563.88 80.6332 573.74 95.3285 580.467 111.502C587.194 127.675 590.657 145.01 590.657 162.516C590.657 180.022 587.194 197.356 580.467 213.53C573.74 229.703 563.88 244.398 551.45 256.777C548.913 259.131 545.557 260.413 542.09 260.352C538.622 260.291 535.314 258.892 532.862 256.45C530.409 254.008 529.005 250.713 528.943 247.259C528.882 243.806 530.169 240.464 532.534 237.937C542.478 228.034 550.367 216.278 555.75 203.338C561.132 190.399 563.902 176.53 563.902 162.525C563.902 148.519 561.132 134.651 555.75 121.711C550.367 108.772 542.478 97.0152 532.534 87.1125C530.027 84.6131 528.619 81.2251 528.619 77.6927C528.619 74.1602 530.027 70.7544 532.534 68.255ZM494.664 105.97C495.907 104.731 497.383 103.749 499.007 103.078C500.632 102.408 502.373 102.063 504.131 102.063C505.89 102.063 507.631 102.408 509.256 103.078C510.88 103.749 512.356 104.731 513.599 105.97C521.056 113.397 526.972 122.214 531.008 131.917C535.043 141.621 537.121 152.022 537.121 162.525C537.121 173.028 535.043 183.428 531.008 193.132C526.972 202.836 521.056 211.653 513.599 219.079C511.062 221.434 507.706 222.716 504.238 222.655C500.771 222.594 497.462 221.195 495.01 218.753C492.558 216.311 491.153 213.016 491.092 209.562C491.031 206.109 492.318 202.767 494.682 200.24C499.657 195.288 503.604 189.409 506.296 182.937C508.989 176.466 510.375 169.53 510.375 162.525C510.375 155.52 508.989 148.583 506.296 142.112C503.604 135.641 499.657 129.761 494.682 124.81C492.175 122.31 490.768 118.922 490.768 115.39C490.768 111.857 492.158 108.469 494.664 105.97Z" fill="#255792"/>
<path d="M459.501 10.0653C461.354 10.0653 462.856 11.5675 462.856 13.4204V162.151C462.856 178.914 457.829 218.706 437.357 253.934C417.244 288.543 382.362 318.741 321.23 318.741C259.94 318.741 225.1 289.512 205.069 255.565C184.658 220.975 179.603 181.238 179.603 162.151V13.4205C179.603 11.5675 181.105 10.0653 182.958 10.0653H459.501Z" fill="#F9F6EE" stroke="#1D294F" stroke-width="20.131" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M187.384 71.0922H267.692" stroke="#1D294F" stroke-width="20.131" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M374.768 71.0922H455.075" stroke="#1D294F" stroke-width="20.131" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M454 161C407.529 161 375 198.867 375 303" stroke="#1D294F" stroke-width="20.131" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M187 161C234.647 161 268 198.867 268 303" stroke="#1D294F" stroke-width="20.131" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M346.231 99.866C338.538 99.866 331.23 103.07 325.846 108.677L321.23 113.483L316.999 109.077C305.845 97.0626 287.384 97.0626 276.229 108.677L275.845 109.077C264.306 121.092 265.513 140.316 276.328 152.331L317.529 196.061C319.487 198.139 322.974 198.139 324.931 196.061L366.132 152.331C376.947 140.316 378.154 121.092 366.616 109.077C361.231 103.07 353.923 99.866 346.231 99.866Z" fill="#255792"/>
</svg>`

export default HomeScreen

const styles = StyleSheet.create ({
    baby: {
        top: '15%'
    },
    text: {
        fontFamily: 'Koulen',
        fontSize: 60,
        color: '#1D294F',
        top: '20%'
    },
    connect: {
      width: 252,
      height: 84,
      backgroundColor: '#1D294F',
      borderRadius: 39,
      top: '30%',
    },
    connectText: {
      fontSize: 48,
      color: '#FFFFFF',
      textAlign: 'center',
      fontFamily: 'Koulen'
    },
    icon: {
        top: '10%'
    },
    header: {
        fontFamily: 'Koulen',
        fontSize: 80,
        color: '#1D294F',
        top: '10%'
    },
    text: {
        fontFamily: 'Koulen',
        fontSize: 60,
        color: '#1D294F',
        top: 50
    },
    done: {
        width: '40%',
        height: 55,
        backgroundColor: '#1D294F',
        borderRadius: 39,
        top: '30%',
      },
    doneText: {
        fontSize: 32,
        color: '#FFFFFF',
        textAlign: 'center',
        fontFamily: 'Koulen'
      },
})